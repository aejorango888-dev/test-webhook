<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webhook Sender</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">

    <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
        <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">Send a Message</h1>

        <!-- Input field for the text -->
        <div class="mb-4">
            <label for="messageInput" class="block text-gray-700 text-sm font-bold mb-2">Your Message:</label>
            <input type="text" id="messageInput" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter your text here...">
        </div>

        <!-- Button to send the data -->
        <div class="flex items-center justify-center">
            <button id="sendButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300">
                Send to Webhook
            </button>
        </div>

        <!-- Message box for feedback -->
        <div id="responseMessage" class="mt-6 text-center text-sm"></div>
    </div>

    <script>
        // --- CONFIGURATION ---
        // IMPORTANT: Replace this URL with your actual Make.com webhook URL
        const WEBHOOK_URL = https://hook.eu2.make.com/e3o4ed3738xd5p67if8no5y352dmnyqv;

        // Get references to the HTML elements
        const sendButton = document.getElementById('sendButton');
        const messageInput = document.getElementById('messageInput');
        const responseMessage = document.getElementById('responseMessage');

        /**
         * Sends the text from the input box to the specified webhook URL.
         */
        async function sendDataToWebhook() {
            const messageText = messageInput.value;

            // 1. Validate the input
            if (!messageText.trim()) {
                showMessage('Please enter a message.', 'red');
                return;
            }

            // A simple check to ensure the user has replaced the placeholder URL
            if (WEBHOOK_URL === 'YOUR_MAKE.COM_WEBHOOK_URL_HERE') {
                showMessage('Please replace the placeholder WEBHOOK_URL in the script.', 'red');
                console.error('Webhook URL is not configured.');
                return;
            }

            // 2. Prepare the data for the webhook
            // Make.com webhooks often expect a JSON payload.
            // We'll send the text in an object with a "text" key.
            const dataToSend = {
                text: messageText
            };

            // Disable button to prevent multiple clicks while sending
            sendButton.disabled = true;
            sendButton.textContent = 'Sending...';
            sendButton.classList.add('opacity-50', 'cursor-not-allowed');

            try {
                // 3. Send the request using the Fetch API
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    // We specify the content type is JSON
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    // We convert the JavaScript object to a JSON string
                    body: JSON.stringify(dataToSend),
                });

                // 4. Handle the response from the webhook
                if (response.ok) {
                    // Make.com webhooks typically respond with "Accepted"
                    const responseData = await response.text();
                    console.log('Success:', responseData);
                    showMessage('Message sent successfully!', 'green');
                    messageInput.value = ''; // Clear the input field on success
                } else {
                    // Handle HTTP errors (e.g., 404, 500)
                    console.error('Webhook error:', response.status, response.statusText);
                    showMessage(`Error: ${response.statusText}. Check console for details.`, 'red');
                }

            } catch (error) {
                // Handle network errors (e.g., no internet connection)
                console.error('Fetch error:', error);
                showMessage('Failed to send message. Check your network connection.', 'red');
            } finally {
                // 5. Re-enable the button after the request is complete
                sendButton.disabled = false;
                sendButton.textContent = 'Send to Webhook';
                sendButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        /**
         * Displays a feedback message to the user.
         * @param {string} message - The message to display.
         * @param {string} color - The color of the message (e.g., 'green' for success, 'red' for error).
         */
        function showMessage(message, color) {
            responseMessage.textContent = message;
            responseMessage.className = `mt-6 text-center text-sm font-medium text-${color}-600`;
            // The message will disappear after 5 seconds
            setTimeout(() => {
                responseMessage.textContent = '';
            }, 5000);
        }


        // Add event listener to the button
        sendButton.addEventListener('click', sendDataToWebhook);

        // Optional: Allow sending by pressing "Enter" in the input field
        messageInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevents the default form submission behavior
                sendDataToWebhook();
            }
        });

    </script>

</body>
</html>
